<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Multi-Site Analysis for Independent Data Sources â€¢ sensitivityselectioncriteria</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Multi-Site Analysis for Independent Data Sources">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sensitivityselectioncriteria</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="external-link nav-link" href="https://ssdqa.github.io/squba/">squba Home</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/multisite_independent.html">Multi-Site Analysis for Independent Data Sources</a></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://hdl.handle.net/20.500.14642/37">PEDSpace</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ssdqa/sensitivityselectioncriteria/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Multi-Site Analysis for Independent Data Sources</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ssdqa/sensitivityselectioncriteria/blob/main/vignettes/multisite_independent.Rmd" class="external-link"><code>vignettes/multisite_independent.Rmd</code></a></small>
      <div class="d-none name"><code>multisite_independent.Rmd</code></div>
    </div>

    
    
<p>The multi-site analyses included in this suite are intended to be
executed against data that are all stored in the same place. However,
there may be some instances where the data associated with each site is
stored in independent locations. This vignette outlines how the
multi-site analysis can be executed in these instances.</p>
<div class="section level2">
<h2 id="multi-site-exploratory-analysis">Multi-Site Exploratory Analysis<a class="anchor" aria-label="anchor" href="#multi-site-exploratory-analysis"></a>
</h2>
<p>First, execute the <strong>Single Site, Exploratory</strong>
analyses, configured appropriately for your study, against each data
source.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ssdqa/sensitivityselectioncriteria" class="external-link">sensitivityselectioncriteria</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ssc_process.html">ssc_process</a></span><span class="op">(</span>base_cohort <span class="op">=</span> <span class="va">my_cohort</span>,</span>
<span>                        alt_cohorts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'My Alternate Cohort'</span> <span class="op">=</span> <span class="va">my_alt_cohort</span><span class="op">)</span>,</span>
<span>                        omop_or_pcornet <span class="op">=</span> <span class="st">'omop'</span>,</span>
<span>                        multi_or_single_site <span class="op">=</span> <span class="st">'single'</span>,</span>
<span>                        anomaly_or_exploratory <span class="op">=</span> <span class="st">'exploratory'</span>,</span>
<span>                        <span class="va">...</span><span class="op">)</span></span></code></pre></div>
<p>This function will produce 2 tables. Select the
<strong>first</strong> table in the list from each result set, then
combine these results into a single table with the different sites
delineated in the <code>site</code> column.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>my_final_results <span class="ot">&lt;-</span> my_table1[[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">union</span>(my_table2[[<span class="dv">1</span>]]) ... <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">union</span>(my_table_n[[<span class="dv">1</span>]])</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multi-site-anomaly-detection-analysis">Multi-Site Anomaly Detection Analysis<a class="anchor" aria-label="anchor" href="#multi-site-anomaly-detection-analysis"></a>
</h2>
<p>It is slightly more complex to reproduce the anomaly detection
analysis in this case, due to the level of summarization that is output
by the typical function. Instead of running the <code>ssc_process</code>
as you normally would, you will need to use an internal function to
produce the correct results.</p>
<p>The first step will be to run the appropriate internal function,
depending on which CDM you are using, against each of the data sources.
It intakes most of the same parameters as the primary
<code>ssc_process</code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## For an OMOP CDM:</span></span>
<span><span class="va">my_omop_table</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">sensitivityselectioncriteria</span><span class="fu">:::</span><span class="fu"><a href="../reference/compare_cohort_def_omop.html">compare_cohort_def_omop</a></span><span class="op">(</span></span>
<span>                                    base_cohort <span class="op">=</span> <span class="va">my_cohort</span>,</span>
<span>                                    alt_cohorts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'My Alternate Cohort'</span> <span class="op">=</span> <span class="va">my_alt_cohort</span><span class="op">)</span>,</span>
<span>                                    multi_or_single_site <span class="op">=</span> <span class="st">'single'</span>,</span>
<span>                                    <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## For a PCORnet CDM:</span></span>
<span><span class="va">my_pcornet_table</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">sensitivityselectioncriteria</span><span class="fu">:::</span><span class="fu"><a href="../reference/compare_cohort_def_pcnt.html">compare_cohort_def_pcnt</a></span><span class="op">(</span></span>
<span>                                    base_cohort <span class="op">=</span> <span class="va">my_cohort</span>,</span>
<span>                                    alt_cohorts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'My Alternate Cohort'</span> <span class="op">=</span> <span class="va">my_alt_cohort</span><span class="op">)</span>,</span>
<span>                                    multi_or_single_site <span class="op">=</span> <span class="st">'single'</span>,</span>
<span>                                    <span class="va">...</span><span class="op">)</span></span></code></pre></div>
<p>Once this function has been executed against each data source,
combine these results into a single table with the different sites
delineated in the <code>site</code> column.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>my_combo_results <span class="ot">&lt;-</span> my_table1 <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">union</span>(my_table2) ... <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">union</span>(my_table_n)</span></code></pre></div>
<p>Then, pass this combined table through the anomaly detection function
that will execute a standardized mean difference computation. If you
provided custom demographic mappings, extract the demographic labels
from this file. Otherwise, use the appropriate package-provided table
based on your data model (either <code>ssc_omop_demographics</code> or
<code>ssc_pcornet_demographics</code>).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">my_final_results</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">sensitivityselectioncriteria</span><span class="fu">:::</span><span class="fu"><a href="../reference/compare_cohort_smd.html">compare_cohort_smd</a></span><span class="op">(</span>cohort_def_output <span class="op">=</span> <span class="va">my_combo_results</span>,</span>
<span>                                                    demographic_vector <span class="op">=</span> </span>
<span>                                                      <span class="va">my_demographic_table</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>                                                        <span class="fu">select</span><span class="op">(</span><span class="va">demographic</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">pull</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hanieh Razzaghi, Kaleigh Wieand, Kimberley Dickinson, Charles Bailey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
